\documentclass[12pt]{article}

\usepackage{bookmark}
\usepackage{subfiles}
\usepackage[explicit]{titlesec}
\usepackage[]{titletoc}
\usepackage[titles]{tocloft}
%\usepackage[x11names]{xcolor}
\usepackage{enumitem}
\usepackage[most]{tcolorbox}
\usepackage[]{lipsum}
\usepackage{palatino}

% Packages for change markups and comments.
% \usepackage[left=2cm,right=5cm,top=2cm,bottom=2cm]{geometry}
\setlength{\marginparwidth}{4cm}
\usepackage[textsize=small]{todonotes}
\usepackage[commandnameprefix=always, commentmarkup=uwave]{changes}
\definechangesauthor{proofing}
\definechangesauthor[color=orange]{RC} %Renae

% Set paragraphs to have vertical skip and no indent
% \usepackage[parfill]{parskip}

\bookmarksetup{numbered}

%% --------------------------- Section, Division, Part Numbering and Format
\counterwithout{subsection}{section}
\counterwithin*{section}{part}
\renewcommand*{\thepart}{\arabic{part}}

\titleformat{\section}[hang]{\normalfont\Large\bfseries}{Division \thesection\ - }{0em}{#1}
\titleformat{\part}[hang]{\normalfont\Large\bfseries}{Part \thepart\ - }{0em}{#1}

\titlecontents{part}
  [0pt]
  {\addvspace{1pc}}%
  {PART \bfseries \large}
  {\bfseries \large PART \contentsmargin{0pt}}
  {}
  [\addvspace{.5pc}]


% \titlecontents{part}[0em]{\large\sffamily\protect\addvspace{15pt}}%
% {\global\booltrue{numbered}\contentslabel[{\partname\enspace\thecontentslabel}]{0em}\brlap[1.25\baselineskip]}{\global\boolfalse{numbered}}%

%% Correct 'Division' labelling in TOC
\renewcommand{\cftsecpresnum}{Division }
\renewcommand{\cftsecaftersnum}{ --- }
\newlength{\mylen} % a "scratch" length
\settowidth{\mylen}{\bfseries\cftsecpresnum\cftsecaftersnum} % extra space
\addtolength{\cftsecnumwidth}{\mylen} % add the extra space

% \renewcommand{\cftpartpresnum}{Part }
% \renewcommand{\cftpartaftersnum}{ --- }
% % \newlength{\mylen} % a "scratch" length
% \settowidth{\mylen}{\bfseries\cftpartpresnum\cftpartaftersnum} % extra space
% \addtolength{\cftpartnumwidth}{\mylen} % add the extra space

\makeatletter
\def\@part[#1]#2{%
    \ifnum \c@secnumdepth >-2\relax
      \refstepcounter{part}%
      \addcontentsline{toc}{part}{\partname~\thepart\hspace{1em}#1}%
    \else
      \addcontentsline{toc}{part}{#1}%
    \fi
    \markboth{}{}%
    {\centering
     \interlinepenalty \@M
     \normalfont
     \ifnum \c@secnumdepth >-2\relax
       \huge\bfseries \partname\nobreakspace\thepart
       \par
       \vskip 20\p@
     \fi
     \Huge \bfseries #2\par}%
    \@endpart}
\makeatother

% \titleformat{\section}[hang]{\sffamily\color{IndianRed3}\bfseries\scshape\filleft\lsstyle}{}{2em}{#1\quad\rule[-0.25cm]{1.5pt}{1cm}\rlap{\qquad\Huge \thesection}}%
% \titleformat{\section}[hang]{\sffamily\color{IndianRed3}\bfseries\scshape\filleft\lsstyle}{}{2em}{#1\quad\rule[-0.25cm]{1.5pt}{1cm}\rlap{\qquad\Large \thesection}}%


% --------------------- Numbered Items
\setlist{leftmargin=*}
\setlist[enumerate,1]{label = \thesubsection.\arabic*., 
                        ref = \thesubsection.\arabic*,
                        leftmargin = 28pt}
\setlist[enumerate,2]{label = \theenumi.\alph*.,
                        ref = \theenumi.\alph*,
                        leftmargin = 28pt}
\setlist[enumerate,3]{label = \theenumii.\roman*.,     
                        ref = \theenumii.\roman*,
                        leftmargin = 32pt}
\setlist[enumerate,4]{label = \theenumiii.(\arabic*).,     
                        ref = \theenumiii.(\arabic*),
                        leftmargin = 40pt}

\setlist[itemize,1]{label=-}

% --------------------- Flags

\newif\ifshownotes

% to toggle on and off the notes blocks, comment and uncomment
% the shownotestrue and shownotesfalse below
\shownotestrue 
% \shownotesfalse

% \ifshownotes
%  % only shown if \importanttrue is set
%  this is some important text
% \fi

% --------------------- Notes Block

\makeatletter
\NewDocumentCommand{\note}{+O{}+m}{%
\ifshownotes
 \begingroup
 \tcbset{%
   noteshift/.store in=\mynote@shift,
   noteshift=1.5cm
 }
 \begin{tcolorbox}[nobeforeafter,
   enhanced,
   sharp corners,
  %  boxrule=0pt,
  %  frame hidden,
  toprule=1pt,
  bottomrule=1pt,
  leftrule=0pt,
  rightrule=0pt,
   colback=white,
   #1,
   left skip=\mynote@shift,
   right skip=\mynote@shift,
   overlay={\node[right] (mynotenode) at ([xshift=-\mynote@shift]frame.west) {\textbf{Note:}} ;},
   ]
   #2
 \end{tcolorbox}
 \endgroup
 \fi
 }
\makeatother



% --------------------- Document Stuff
\title{Constitution of Perth Artifactory Inc}
\author{}

% DATE:
\date{\today}

\begin{document}

\maketitle

\tableofcontents

\pagebreak

% \input{sections/definitions.tex}




\subfile{sections/part_0.tex}
\subfile{sections/part_1.tex}
\subfile{sections/part_2.tex}
\subfile{sections/part_3.tex}
\subfile{sections/part_4.tex}
\subfile{sections/part_5.tex}
\subfile{sections/part_6.tex}
\subfile{sections/part_7.tex}
\subfile{sections/part_8.tex}

\listofchanges[style=list, show=added|deleted|replaced]

%% -------------------- TESTS

% \part{Test}

% \section{Test Division}

% \subsection{Test}

% \begin{enumerate}
%   \item \label{test:lorem} lorem 
%   \item \label{test:ipsum} ipsum
%   \begin{enumerate}
%     \item \label{test:ipsum:lorem} lorem
%     \begin{enumerate}
%       \item \label{test:ipsum:lorem:ipsum} ipsum
%       \begin{enumerate}
%         \item \label{test:i:l:i:l} lorem
%       \end{enumerate}
%     \end{enumerate}
%   \end{enumerate}
% \end{enumerate}


% For items \ref{test:ipsum:lorem} and \ref{test:ipsum:lorem:ipsum}, and also \ref{test:i:l:i:l}

% \note{\lipsum[1]}

\end{document}
