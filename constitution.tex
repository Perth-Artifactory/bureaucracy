\documentclass[12pt]{article}

\usepackage{bookmark}
\usepackage{subfiles}
\usepackage[explicit]{titlesec}
\usepackage[]{titletoc}
\usepackage[titles]{tocloft}
\usepackage{enumitem}
\usepackage[most]{tcolorbox}
\usepackage[]{lipsum}
\usepackage{palatino}
\usepackage{xltabular}
\usepackage{csquotes}

\usepackage[a4paper,left=2cm,right=2cm,top=3cm,bottom=2cm]{geometry}

\usepackage[inline]{showlabels} % Development only

% Packages for change markups and comments.

\setlength{\marginparwidth}{4cm}
\usepackage[textsize=small]{todonotes}
\usepackage[commandnameprefix=always, commentmarkup=uwave, draft]{changes}
\definechangesauthor[color=green!50!black]{proofing}
\definechangesauthor[color=orange]{RC} %Renae
\definechangesauthor{CAP1-Exclude-Voluntary-Invoices}
\definechangesauthor{CAP2-Permissive-Written-Notice-For-Committee}
\definechangesauthor{CAP3-Community-Shed}
\definechangesauthor{CAP4-Corporate-Members}
\definechangesauthor{CAP5-Meeting-At-More-Than-One-Place}
\definechangesauthor{CAP6-Delete-Further-Delay-Clauses}
\definechangesauthor{CAP7-Membership-Fees}
\definechangesauthor{CAP8-Common-Seal}
\definechangesauthor{CAP9-Emergency-Disciplinary-Action}


% Set paragraphs to have vertical skip and no indent
\usepackage[parfill]{parskip}

\bookmarksetup{numbered}

%% --------------------------- Section, Division, Part Numbering and Format
\counterwithout{subsection}{section}
\counterwithin*{section}{part}
\renewcommand*{\thepart}{\arabic{part}}

\titleformat{\section}[hang]{\normalfont\Large\bfseries}{Division \thesection\ - }{0em}{#1}
\titleformat{\part}[hang]{\normalfont\Large\bfseries}{Part \thepart\ - }{0em}{#1}
\titleformat{name = \part, numberless}[hang]{\normalfont\Large\bfseries}{}{0em}{#1}

\titlecontents{part}
  [0pt]
  {\addvspace{1pc}}%
  {PART \bfseries \large}
  {\bfseries \large PART \contentsmargin{0pt}}
  {}
  [\addvspace{.5pc}]

%% Correct 'Division' labelling in TOC
\renewcommand{\cftsecpresnum}{Division }
\renewcommand{\cftsecaftersnum}{ --- }
\newlength{\mylen} % a "scratch" length
\settowidth{\mylen}{\bfseries\cftsecpresnum\cftsecaftersnum} % extra space
\addtolength{\cftsecnumwidth}{\mylen} % add the extra space

\makeatletter
\def\@part[#1]#2{%
    \ifnum \c@secnumdepth >-2\relax
      \refstepcounter{part}%
      \addcontentsline{toc}{part}{\partname~\thepart\hspace{1em}#1}%
    \else
      \addcontentsline{toc}{part}{#1}%
    \fi
    \markboth{}{}%
    {\centering
     \interlinepenalty \@M
     \normalfont
     \ifnum \c@secnumdepth >-2\relax
       \huge\bfseries \partname\nobreakspace\thepart
       \par
       \vskip 20\p@
     \fi
     \Huge \bfseries #2\par}%
    \@endpart}
\makeatother

% --------------------- Numbered Items
\setlist{leftmargin=*}
\setlist[enumerate,1]{label = \thesubsection.\arabic*., 
                        ref = \thesubsection.\arabic*,
                        leftmargin = 28pt}
\setlist[enumerate,2]{label = \theenumi.\alph*.,
                        ref = \theenumi.\alph*,
                        leftmargin = 28pt}
\setlist[enumerate,3]{label = \theenumii.\roman*.,     
                        ref = \theenumii.\roman*,
                        leftmargin = 32pt}
\setlist[enumerate,4]{label = \theenumiii.(\arabic*).,     
                        ref = \theenumiii.(\arabic*),
                        leftmargin = 40pt}

\setlist[itemize,1]{label=-}

% --------------------- Flags

\newif\ifshownotes

% to toggle on and off the notes blocks, comment and uncomment
% the shownotestrue and shownotesfalse below
\shownotestrue 
% \shownotesfalse

% \ifshownotes
%  % only shown if \importanttrue is set
%  this is some important text
% \fi

% --------------------- Notes Block

\makeatletter
\NewDocumentCommand{\note}{+O{}+m}{%
\ifshownotes
 \begingroup
% \tcbset{%
%   noteshift/.store in=\mynote@shift,
%  noteshift=1.5cm
% }
 \begin{tcolorbox}[
  title=Note,
  % nobeforeafter,
  enhanced,
  % sharp corners,
  % boxrule=0pt,
  % frame hidden,
  toprule=1pt,
  bottomrule=1pt,
  leftrule=1pt,
  rightrule=1pt,
  colback=blue!5!white,
  colbacktitle=blue,
  colframe=blue,
  #1,
%   left skip=\mynote@shift,
%   right skip=\mynote@shift,
%   overlay={\node[right] (mynotenode) at ([xshift=-\mynote@shift]frame.west) {\textbf{Note:}} ;},
   ]
   #2
 \end{tcolorbox}
 \endgroup
 \fi
 }
\makeatother

\makeatletter
% Parskip in minipages (e.g. tcolorboxes.)
\newcommand{\@minipagerestore}{\setlength{\parskip}{\medskipamount}}
\makeatother

% Headers and footers
\usepackage{fancyhdr}
\fancyhead{}
\fancyhead[C]{Constitution of Perth Artifactory Inc - DRAFT}

% --------------------- Document Stuff
\pagestyle{fancy}
\title{Constitution of Perth Artifactory Inc - DRAFT}
\author{}

% DATE:
\date{\today}

\begin{document}

\maketitle

\tableofcontents

\pagebreak
\subfile{sections/revision_history.tex}
\pagebreak
\subfile{sections/preface.tex}
\pagebreak
\subfile{sections/part_0.tex}
\pagebreak
\subfile{sections/part_1.tex}
\pagebreak
\subfile{sections/part_2.tex}
\pagebreak
\subfile{sections/part_3.tex}
\pagebreak
\subfile{sections/part_4.tex}
\pagebreak
\subfile{sections/part_5.tex}
\pagebreak
\subfile{sections/part_6.tex}
\pagebreak
\subfile{sections/part_7.tex}
\pagebreak
\subfile{sections/part_8.tex}
\pagebreak
\subfile{sections/own_rules_matters.tex}


\pagebreak
\listofchanges[style=list, show=added|deleted|replaced]

\end{document}
